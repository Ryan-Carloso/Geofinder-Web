{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{MapContainer,TileLayer,Marker,Popup,useMap}from'react-leaflet';import{Link}from'react-router-dom';import'leaflet/dist/leaflet.css';import L from'leaflet';import'./App.css';// Import custom CSS for styling\n// Define icon to fix the default marker issue\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',iconUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',shadowUrl:'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'});const Finder=()=>{const[code,setCode]=useState('');const[foundLocation,setFoundLocation]=useState(null);const[currentLocation,setCurrentLocation]=useState(null);const[errorMessage,setErrorMessage]=useState('');useEffect(()=>{if('geolocation'in navigator){navigator.geolocation.getCurrentPosition(position=>{setCurrentLocation({latitude:position.coords.latitude,longitude:position.coords.longitude});},error=>{console.error('Erro ao obter localização:',error);setErrorMessage('Ocorreu um erro ao obter sua localização.');});}else{setErrorMessage('Geolocalização não suportada pelo seu navegador.');}},[]);const handleFindLocation=async event=>{event.preventDefault();try{const url=\"https://geo-finder-7e641-default-rtdb.europe-west1.firebasedatabase.app/codes/\".concat(code,\".json\");const response=await axios.get(url);if(response.data&&response.data.latitude&&response.data.longitude){const{latitude,longitude}=response.data;setFoundLocation({latitude,longitude});setErrorMessage('');}else{setFoundLocation(null);setErrorMessage('Código não encontrado.');}}catch(error){console.error('Erro ao buscar código no Firebase:',error);setErrorMessage('Ocorreu um erro ao buscar o código. Por favor, tente novamente.');}};const MapButtons=_ref=>{let{onGoToCurrentLocation,onGoToFoundLocation}=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',bottom:'10px',left:'50%',transform:'translateX(-50%)',zIndex:1000},children:[/*#__PURE__*/_jsx(\"button\",{onClick:onGoToCurrentLocation,style:{marginRight:'10px',padding:'10px',backgroundColor:'blue',color:'white'},children:\"Minha Localiza\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onGoToFoundLocation,style:{padding:'10px',backgroundColor:'green',color:'white'},children:\"Localiza\\xE7\\xE3o Encontrada\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",style:{padding:'10px',backgroundColor:'white',color:'black',fontWeight:700,marginLeft:10,display:'inline-block',textDecoration:'none'},children:\"Voltar\"})]});};const MapComponent=()=>{const map=useMap();const goToCurrentLocation=()=>{if(currentLocation){map.setView([currentLocation.latitude,currentLocation.longitude],13);}};const goToFoundLocation=()=>{if(foundLocation){map.setView([foundLocation.latitude,foundLocation.longitude],13);}};return/*#__PURE__*/_jsx(MapButtons,{onGoToCurrentLocation:goToCurrentLocation,onGoToFoundLocation:goToFoundLocation});};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFindLocation,className:\"form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:code,onChange:e=>setCode(e.target.value),placeholder:\"Insira o C\\xF3digo\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Buscar Localiza\\xE7\\xE3o\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errorMessage}),currentLocation&&/*#__PURE__*/_jsxs(MapContainer,{center:[currentLocation.latitude,currentLocation.longitude],zoom:13,style:{height:'100vh',width:'100%'},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"}),/*#__PURE__*/_jsx(Marker,{position:[currentLocation.latitude,currentLocation.longitude],children:/*#__PURE__*/_jsx(Popup,{children:\"Sua Localiza\\xE7\\xE3o Atual\"})}),foundLocation&&/*#__PURE__*/_jsx(Marker,{position:[foundLocation.latitude,foundLocation.longitude],children:/*#__PURE__*/_jsx(Popup,{children:\"Localiza\\xE7\\xE3o Encontrada\"})}),/*#__PURE__*/_jsx(MapComponent,{})]})]});};export default Finder;","map":{"version":3,"names":["React","useState","useEffect","axios","MapContainer","TileLayer","Marker","Popup","useMap","Link","L","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","Finder","code","setCode","foundLocation","setFoundLocation","currentLocation","setCurrentLocation","errorMessage","setErrorMessage","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","error","console","handleFindLocation","event","preventDefault","url","concat","response","get","data","MapButtons","_ref","onGoToCurrentLocation","onGoToFoundLocation","style","bottom","left","transform","zIndex","children","onClick","marginRight","padding","backgroundColor","color","to","fontWeight","marginLeft","display","textDecoration","MapComponent","map","goToCurrentLocation","setView","goToFoundLocation","className","onSubmit","type","value","onChange","e","target","placeholder","required","center","zoom","height","width","attribution"],"sources":["/Users/ryancarlos/geo-finder-web/src/finder.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport { Link } from 'react-router-dom';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport './App.css'; // Import custom CSS for styling\n\n// Define icon to fix the default marker issue\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n});\n\nconst Finder = () => {\n  const [code, setCode] = useState('');\n  const [foundLocation, setFoundLocation] = useState(null);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  useEffect(() => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setCurrentLocation({\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n          });\n        },\n        (error) => {\n          console.error('Erro ao obter localização:', error);\n          setErrorMessage('Ocorreu um erro ao obter sua localização.');\n        }\n      );\n    } else {\n      setErrorMessage('Geolocalização não suportada pelo seu navegador.');\n    }\n  }, []);\n\n  const handleFindLocation = async (event) => {\n    event.preventDefault();\n\n    try {\n      const url = `https://geo-finder-7e641-default-rtdb.europe-west1.firebasedatabase.app/codes/${code}.json`;\n      const response = await axios.get(url);\n\n      if (response.data && response.data.latitude && response.data.longitude) {\n        const { latitude, longitude } = response.data;\n        setFoundLocation({ latitude, longitude });\n        setErrorMessage('');\n      } else {\n        setFoundLocation(null);\n        setErrorMessage('Código não encontrado.');\n      }\n    } catch (error) {\n      console.error('Erro ao buscar código no Firebase:', error);\n      setErrorMessage('Ocorreu um erro ao buscar o código. Por favor, tente novamente.');\n    }\n  };\n\n  const MapButtons = ({ onGoToCurrentLocation, onGoToFoundLocation }) => {\n    return (\n      <div style={{ position: 'absolute', bottom: '10px', left: '50%', transform: 'translateX(-50%)', zIndex: 1000 }}>\n        <button\n          onClick={onGoToCurrentLocation}\n          style={{ marginRight: '10px', padding: '10px', backgroundColor: 'blue', color: 'white' }}\n        >\n          Minha Localização\n        </button>\n        <button\n          onClick={onGoToFoundLocation}\n          style={{ padding: '10px', backgroundColor: 'green', color: 'white' }}\n        >\n          Localização Encontrada\n        </button>\n        <Link to=\"/\" style={{ padding: '10px', backgroundColor: 'white', color: 'black', fontWeight: 700, marginLeft: 10, display: 'inline-block', textDecoration: 'none' }}>\n          Voltar\n        </Link>\n      </div>\n    );\n  };\n\n  const MapComponent = () => {\n    const map = useMap();\n\n    const goToCurrentLocation = () => {\n      if (currentLocation) {\n        map.setView([currentLocation.latitude, currentLocation.longitude], 13);\n      }\n    };\n\n    const goToFoundLocation = () => {\n      if (foundLocation) {\n        map.setView([foundLocation.latitude, foundLocation.longitude], 13);\n      }\n    };\n\n    return <MapButtons onGoToCurrentLocation={goToCurrentLocation} onGoToFoundLocation={goToFoundLocation} />;\n  };\n\n  return (\n    <div className=\"app\">\n      <form onSubmit={handleFindLocation} className=\"form\">\n        <input\n          type=\"text\"\n          value={code}\n          onChange={(e) => setCode(e.target.value)}\n          placeholder=\"Insira o Código\"\n          required\n        />\n        <button type=\"submit\">Buscar Localização</button>\n      </form>\n      {errorMessage && <p className=\"error\">{errorMessage}</p>}\n      {currentLocation && (\n        <MapContainer\n          center={[currentLocation.latitude, currentLocation.longitude]}\n          zoom={13}\n          style={{ height: '100vh', width: '100%' }}\n        >\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n          />\n          <Marker position={[currentLocation.latitude, currentLocation.longitude]}>\n            <Popup>Sua Localização Atual</Popup>\n          </Marker>\n          {foundLocation && (\n            <Marker position={[foundLocation.latitude, foundLocation.longitude]}>\n              <Popup >Localização Encontrada</Popup>\n            </Marker>\n          )}\n          <MapComponent />\n        </MapContainer>\n      )}\n    </div>\n  );\n};\n\nexport default Finder;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}